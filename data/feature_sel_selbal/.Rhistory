df=read_csv("./../../../Data_21Dec20/species_data.csv",index_col=0)
df=readcsv("./../../../Data_21Dec20/species_data.csv",index_col=0)
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
View(df)
library(selbal)
library(compositions)
row.names(y1)
train_ind<-row.names(y1)
test_ind<-train_ind<-row.names(y2)
c(train_ind,test_ind)
df[ind,]
ind<-c(train_ind,test_ind)
df[ind,]
df<-df[ind,]
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
library(selbal)
library(compositions)
train_ind<-row.names(y1)
test_ind<-train_ind<-row.names(y2)
ind<-c(train_ind,test_ind)
df<-df[ind,]
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
library(selbal)
library(compositions)
train_ind<-row.names(y1)
test_ind<-train_ind<-row.names(y2)
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
library(selbal)
library(compositions)
train_ind<-row.names(y1)
test_ind<-row.names(y2)
ind<-c(train_ind,test_ind)
df<-df[ind,]
rbind(y1,y2)
y1$ExacerbatorState
labels<-c(y1$ExacerbatorState,y2$ExacerbatorState)
labels
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
library(selbal)
library(compositions)
train_ind<-row.names(y1)
test_ind<-row.names(y2)
ind<-c(train_ind,test_ind)
df<-df[ind,]
labels<-c(y1$ExacerbatorState,y2$ExacerbatorState)
labels<-rbind(y1$ExacerbatorState,y2$ExacerbatorState)
y1$ExacerbatorState
labels<-fct_c(y1$ExacerbatorState,y2$ExacerbatorState)
y1$ExacerbatorState
labels<-c(as.character(y1$ExacerbatorState),as.character(y2$ExacerbatorState))
labels]
labels
labels[labels=="Exacerbator"]
labels[labels=="Exacerbator"]="NonEx"
labels
labels[labels=="Exacerbator"]="NonEx"
labels<-c(as.character(y1$ExacerbatorState),as.character(y2$ExacerbatorState))
labels
labels<-factor(labels)
labels
labels[labels=="Exacerbator"]="NonEx"
labels<-factor(labels)
labels
selbal(x = df, y = labels, maxV = 12,
logit.acc = 'Dev', draw = F)
df
selbal.cv(x = df, y = labels)
?sebal
?selbal
df
df.dim
df.dim
dim(df)
selbal(x = as.matrix(df), y = labels)
is.nan(df)
is.na(df)
is.na(df).sum()
sum(is.na(df))
sum(is.na(labels))
load("HIV.rda")
data(HIV)
x <- HIV[,1:60]
x
x.shape
dim(x)
y <- HIV[,62]
dim(y)
y
selbal(x,y)
x
colSums(x)
rowSums(x)
rowSums(df)
colSums(df)
labels
y
length(y)
length(y)
dim(x)
dim(df)
dim(labels)
length(labels)
class(x)
class(df)
class(y)
class(labels)
selbal(x = df, y = labels)
?colmina
?colmins
selbal()
selbal
x=df
y=labels
y
classy <- class(y)
f.class <- "gaussian"
numy <- y
if (classy == "factor") {
ylev <- levels(y)
numy <- as.numeric(y) - 1
f.class <- "binomial"
}
suppressMessages(library(zCompositions))
var.nam <- rem.nam <- colnames(x)
if (!is.null(covar)) {
dat <- data.frame(cbind(numy, covar))
}
else {
dat <- data.frame(numy)
}
dat <- data.frame(numy)
logCounts <- x
logCounts <- log(cmultRepl2(x, zero.rep = zero.rep))
logCounts <- log(selbal:cmultRepl2(x, zero.rep = zero.rep))
logCounts <- log(selbal::cmultRepl2(x, zero.rep = zero.rep))
zero.rep = "bayes"
logCounts <- log(selbal::cmultRepl2(x, zero.rep = zero.rep))
?cmultRepl2
selbal(x = df, y = labels,zero.rep="one")
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
library(selbal)
library(compositions)
train_ind<-row.names(y1)
test_ind<-row.names(y2)
ind<-c(train_ind,test_ind)
df<-df[ind,]
labels<-c(as.character(y1$ExacerbatorState),as.character(y2$ExacerbatorState))
labels[labels=="Exacerbator"]="NonEx"
labels<-factor(labels)
res<-selbal(x = df, y = labels,zero.rep="one")
1e10
1e10+1
1e10+10
1e10
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50)
res
res[""][]$EVOL
res$global.plot
res$global.plot2
res$``
res$``
res[``]
res[[``]]
res
plot.tab(res)
plot.tab(res[[""]])
plot.tab(res[[' ']])
res$``
res[[``]]
res[``]
res$ROC.plot
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50,draw = FALSE)
res
plot.tab(res[[6]])
res[[6]]
plot(res)
res[[4]]
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "AUC",logt = TRUE,tab = TRUE,maxV = 50,draw = FALSE)
selected_f<-res[[4]]
selected_f
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50,draw = FALSE)
selected_f<-res[[4]]
as.data.frame(selected_f)
selected_f<-as.data.frame(res[[4]])
write.csv(selected_f,"selected_features.csv")
df=read.csv("./../../../Data_21Dec20/species_data.csv",row.names = 1)
y1=read.csv("./../../../METADATA/data_194.csv",row.names=1)
y2=read.csv("./../../../METADATA/data_test.csv",row.names=1)
library(selbal)
library(compositions)
train_ind<-row.names(y1)
test_ind<-row.names(y2)
ind<-c(train_ind,test_ind)
df<-df[ind,]
labels<-c(as.character(y1$ExacerbatorState),as.character(y2$ExacerbatorState))
labels[labels=="Exacerbator"]="NonEx"
labels
labels<-factor(labels,levels = c("NonEx","Exacerbator"))
labels
labels<-c(as.character(y1$ExacerbatorState),as.character(y2$ExacerbatorState))
labels[labels=="Exacerbator"]="NonEx"
labels<-factor(labels,levels = c("NonEx","FreqEx"))
labels
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50,draw = FALSE)
selected_f<-as.data.frame(res[[4]])
selected_f
write.csv(selected_f,"selected_features.csv")
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50,draw = TRUE)
png("plot.png",width = 5,height = 8,units = "in",res = 600)
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50,draw = TRUE)
dev.off()
png("plot.png",width = 8,height = 9,units = "in",res = 600)
res
dev.off()
res
res
res$global.plot
res$global.plot2
res$global.plot2
plot(res$global.plot2)
png("plot.png",width = 10,height = 12,units = "in",res = 600)
res$global.plot2
dev.off()
res$global.plot2
png("plot.png",width = 10,height = 12,units = "in",res = 600)
plot(res$global.plot2)
dev.off()
plot(res)
png("plot.png",width = 12,height = 12,units = "in",res = 600)
plot(res$global.plot2)
dev.off()
png("plot.png",width = 15,height = 15,units = "in",res = 600)
res<-selbal(x = df, y = labels,zero.rep="one",logit.acc = "Dev",logt = TRUE,tab = TRUE,maxV = 50,draw = TRUE)
dev.off()
